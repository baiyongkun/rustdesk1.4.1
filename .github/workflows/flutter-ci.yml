name: Full Flutter CI

on:
  workflow_dispatch:    # ✅ 可手动在 GitHub UI 中点击 "Run workflow" 触发
  pull_request:         # ✅ 当有 Pull Request 时触发
    paths-ignore:
    - "docs/**"
    - "README.md"       # 忽略对 docs/ 和 README.md 的改动
  push:                 # ✅ 当代码 Push 到仓库时触发
    branches:
      - master          # 仅针对 master 分支
    paths-ignore:
      - ".github/**"
      - "docs/**"
      - "README.md"
      - "res/**"
      - "appimage/**"
      - "flatpak/**"

jobs:
  run-ci:
    uses: ./.github/workflows/flutter-build.yml    # 核心任务
    with:
      upload-artifact: true  #可能用于控制是否上传构建产物，比如 APK
